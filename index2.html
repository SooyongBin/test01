<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>스테이지원 유튜버의 역사 - 히스토리</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Noto Sans KR", sans-serif;
        background: linear-gradient(to bottom, #6b7280, #1f2937);
        color: #f3f4f6;
        min-height: 100vh;
      }
      .tab-button {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
        color: #d1d5db;
      }
      .tab-button.active {
        background-color: #4f46e5;
        color: #ffffff;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .timeline-item {
        position: relative;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border-radius: 0.75rem;
        background-color: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      }
      .timeline-connector {
        position: absolute;
        top: 1.5rem;
        left: -0.75rem;
        width: 1.5rem;
        height: 1.5rem;
        background-color: #f3f4f6;
        border-radius: 9999px;
        border: 4px solid #4f46e5;
      }
      .timeline-line {
        position: absolute;
        top: 0;
        bottom: 0;
        left: calc(1.5rem / 2 - 2px);
        width: 4px;
        background: linear-gradient(to bottom, #818cf8, #4f46e5, #3730a3);
        z-index: -1;
      }
      .gradient-text {
        background: linear-gradient(to right, #a5b4fc, #6366f1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .icon-container {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.875rem;
        color: #9ca3af;
      }
      .emotion-icon {
        font-size: 1.5rem;
        margin-right: 0.5rem;
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .chart-container {
        background-color: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        padding: 1rem;
        margin-bottom: 2rem;
      }
    </style>
    <style>
      body {
        min-height: max(884px, 100dvh);
      }
    </style>
  </head>
  <body class="p-4">
    <header class="text-center mb-8">
      <h1 class="text-3xl font-bold gradient-text">스테이지원 유튜버의 역사</h1>
      <p class="text-lg text-gray-300">히스토리</p>
    </header>
    <div class="flex justify-center mb-8 space-x-4">
      <button class="tab-button" id="videosTab" onclick="showTab('videos')">
        영상
      </button>
      <button
        class="tab-button active"
        id="subscribersTab"
        onclick="showTab('subscribers')"
      >
        구독자
      </button>
    </div>
    <div id="contentContainer"></div>
    <script>
      const videoData = [
        {
          date: "2025. 5",
          title: "밤베르크 심포니",
          views: "921회",
          likes: "82개",
          emotion: "🎉",
          thumbnailUrl: "https://i.ytimg.com/vi/placeholder1/hqdefault.jpg",
        },
        {
          date: "2025. 5",
          title: "정재형 & 알렉산더",
          views: "12회",
          likes: "5개",
          emotion: "🤔",
          thumbnailUrl: "https://i.ytimg.com/vi/placeholder2/hqdefault.jpg",
        },
        {
          date: "2025. 4",
          title: "최희연 piano",
          views: "64회",
          likes: "15개",
          emotion: "💖",
          thumbnailUrl: "https://i.ytimg.com/vi/placeholder3/hqdefault.jpg",
        },
        {
          date: "2025. 3",
          title: "KBS 교향악단",
          views: "22회",
          likes: "7개",
          emotion: "👏",
          thumbnailUrl: "https://i.ytimg.com/vi/placeholder4/hqdefault.jpg",
        },
        {
          date: "2024. 12",
          title: "연말결산 라이브",
          views: "1050회",
          likes: "150개",
          emotion: "🥳",
          thumbnailUrl: "https://i.ytimg.com/vi/placeholder5/hqdefault.jpg",
        },
        {
          date: "2024. 10",
          title: "가을 음악회 스케치",
          views: "320회",
          likes: "45개",
          emotion: "🍂",
          thumbnailUrl: "https://i.ytimg.com/vi/placeholder6/hqdefault.jpg",
        },
      ];
      const subscriberData = [
        {
          date: "2024. 10",
          subscribers: 11200,
          change: "-50명",
          emotion: "😥",
        },
        {
          date: "2024. 11",
          subscribers: 11300,
          change: "+100명",
          emotion: "🙂",
        },
        {
          date: "2024. 12",
          subscribers: 11800,
          change: "+500명",
          emotion: "🎊",
        },
        {
          date: "2025. 1",
          subscribers: 12100,
          change: "+300명",
          emotion: "🌟",
        },
        { date: "2025. 2", subscribers: 12050, change: "-50명", emotion: "😟" },
        {
          date: "2025. 3",
          subscribers: 12150,
          change: "+100명",
          emotion: "😊",
        },
        {
          date: "2025. 4",
          subscribers: 12300,
          change: "+150명",
          emotion: "📈",
        },
        {
          date: "2025. 5",
          subscribers: 12500,
          change: "+200명",
          emotion: "🚀",
        },
      ];
      const contentContainer = document.getElementById("contentContainer");
      const videosTab = document.getElementById("videosTab");
      const subscribersTab = document.getElementById("subscribersTab");
      let subscriberChart = null;
      function createVideoItem(item) {
        return `
            <div class="timeline-item fade-in" style="margin-left: 2rem;">
                <div class="timeline-connector"></div>
                <div class="flex flex-col md:flex-row gap-4">
                    <img src="${item.thumbnailUrl}" alt="${item.title} 썸네일" class="w-full md:w-48 h-auto object-cover rounded-lg mb-2 md:mb-0">
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-lg font-semibold text-indigo-300">${item.title}</h3>
                            <span class="text-sm text-gray-400">${item.date}</span>
                        </div>
                        <div class="text-gray-300">
                            <div class="icon-container">
                                <span class="material-icons text-base">visibility</span>
                                <span>${item.views}</span>
                            </div>
                            <div class="icon-container mt-1">
                                <span class="material-icons text-base">thumb_up</span>
                                <span>${item.likes}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="absolute top-4 right-4 text-2xl">${item.emotion}</div>
            </div>
        `;
      }
      function createSubscriberContent(data) {
        const chartHtml = `
            <div class="chart-container fade-in">
                <canvas id="subscriberLineChart"></canvas>
            </div>
        `;
        let itemsHtml =
          '<div class="relative" id="timelineContainerSubscriber"><div class="timeline-line"></div>';
        data
          .slice()
          .reverse()
          .forEach((item) => {
            // Display recent first
            const isPositiveChange = item.change.startsWith("+");
            const changeColor = isPositiveChange
              ? "text-green-400"
              : "text-red-400";
            itemsHtml += `
                <div class="timeline-item fade-in" style="margin-left: 2rem;">
                    <div class="timeline-connector"></div>
                     <div class="flex justify-between items-start mb-2">
                        <h3 class="text-lg font-semibold text-indigo-300">구독자: ${item.subscribers.toLocaleString()}명</h3>
                        <span class="text-sm text-gray-400">${item.date}</span>
                    </div>
                    <p class="text-sm ${changeColor}">${item.change}</p>
                    <div class="absolute top-4 right-4 text-2xl">${
                      item.emotion
                    }</div>
                </div>
            `;
          });
        itemsHtml += "</div>";
        return chartHtml + itemsHtml;
      }
      function renderSubscriberChart(data) {
        const ctx = document
          .getElementById("subscriberLineChart")
          .getContext("2d");
        if (subscriberChart) {
          subscriberChart.destroy();
        }
        subscriberChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: data.map((item) => item.date),
            datasets: [
              {
                label: "구독자 수",
                data: data.map((item) => item.subscribers),
                borderColor: "#6366F1",
                backgroundColor: "rgba(99, 102, 241, 0.2)",
                tension: 0.3,
                fill: true,
                pointBackgroundColor: "#F3F4F6",
                pointBorderColor: "#4F46E5",
                pointRadius: 5,
                pointHoverRadius: 7,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: false,
                ticks: {
                  color: "#9CA3AF",
                  font: { family: "'Noto Sans KR', sans-serif" },
                },
                grid: {
                  color: "rgba(255, 255, 255, 0.1)",
                },
              },
              x: {
                ticks: {
                  color: "#9CA3AF",
                  font: { family: "'Noto Sans KR', sans-serif" },
                },
                grid: {
                  color: "rgba(255, 255, 255, 0.1)",
                },
              },
            },
            plugins: {
              legend: {
                labels: {
                  color: "#D1D5DB",
                  font: { family: "'Noto Sans KR', sans-serif" },
                },
              },
            },
          },
        });
      }
      function renderVideoTimeline(data) {
        let html =
          '<div class="relative" id="timelineContainerVideo"><div class="timeline-line"></div>';
        data.forEach((item) => {
          html += createVideoItem(item);
        });
        html += "</div>";
        contentContainer.innerHTML = html;
      }
      function showTab(tabName) {
        if (tabName === "videos") {
          videosTab.classList.add("active");
          subscribersTab.classList.remove("active");
          renderVideoTimeline(videoData);
        } else if (tabName === "subscribers") {
          subscribersTab.classList.add("active");
          videosTab.classList.remove("active");
          contentContainer.innerHTML = createSubscriberContent(subscriberData);
          renderSubscriberChart(subscriberData);
        }
      }
      // Initial load
      showTab("subscribers"); // Default to subscribers tab as per request
      // Infinite scroll (simplified example)
      let loading = false;
      window.addEventListener("scroll", () => {
        if (
          window.innerHeight + window.scrollY >=
            document.body.offsetHeight - 100 &&
          !loading
        ) {
          loading = true;
          // Simulate loading more data
          setTimeout(() => {
            const currentTab = videosTab.classList.contains("active")
              ? "videos"
              : "subscribers";
            if (currentTab === "videos") {
              const newData = [
                {
                  date: "2024. 08",
                  title: "새로운 시리즈 예고",
                  views: "500회",
                  likes: "70개",
                  emotion: "👀",
                  thumbnailUrl:
                    "https://i.ytimg.com/vi/placeholder7/hqdefault.jpg",
                },
                {
                  date: "2024. 06",
                  title: "콜라보레이션 영상",
                  views: "1200회",
                  likes: "200개",
                  emotion: "🤝",
                  thumbnailUrl:
                    "https://i.ytimg.com/vi/placeholder8/hqdefault.jpg",
                },
              ];
              videoData.push(...newData);
              const timelineContainerVideo = document.getElementById(
                "timelineContainerVideo"
              );
              if (timelineContainerVideo) {
                newData.forEach(
                  (item) =>
                    (timelineContainerVideo.innerHTML += createVideoItem(item))
                );
              }
            } else {
              // For subscriber tab, new data will be reflected in chart and list if implemented
              // For this example, we'll just log it as infinite scroll for subscribers might mean fetching older data or similar
              console.log(
                "Loading more subscriber data (not visually implemented in this example beyond initial load)"
              );
            }
            loading = false;
          }, 1000);
        }
      });
    </script>
  </body>
</html>
